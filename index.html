<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Richard's Travel Photography</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f4f4f4;
      color: #333;
    }
    header {
      background-color: #333;
      color: #fff;
      padding: 10px 0;
      text-align: center;
    }
    nav {
      display: flex;
      justify-content: center;
      background-color: #444;
    }
    nav a {
      color: #fff;
      padding: 14px 20px;
      text-decoration: none;
      text-align: center;
    }
    nav a:hover {
      background-color: #555;
    }
    section {
      padding: 20px;
    }
    .galleries {
      display: flex;
      flex-direction: column;
      gap: 50px;
    }
    .gallery-container {
      text-align: center;
    }
    .gallery-title {
      font-size: 24px;
      margin-bottom: 10px;
      font-weight: bold;
      text-transform: uppercase;
      letter-spacing: 2px;
      color: #555;
      position: relative;
    }
    .gallery-title::after {
      content: "";
      display: block;
      width: 60px;
      height: 3px;
      background: #333;
      margin: 10px auto 0;
    }
    .gallery {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
    }
    .gallery img {
      margin: 10px;
      border: 5px solid #fff;
      box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
      max-width: 100%;
      height: auto;
      cursor: pointer;
      transition: opacity 0.3s ease;
    }
    .gallery img.fade {
      opacity: 0.2 !important;
      transition: opacity 0.3s ease !important;
    }
    .landscape {
      max-width: 300px;
      max-height: 200px;
    }
    .portrait {
      max-width: 200px;
      max-height: 300px;
    }
    .rectangle {
      max-width: 300px;
      max-height: 300px;
    }
    .section-button-wrapper {
      margin-top: 10px;
    }
    .show-more-button {
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
    }
    footer {
      background-color: #333;
      color: #fff;
      text-align: center;
      padding: 10px 0;
      position: relative;
      width: 100%;
    }
    .full-size-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.85);
      justify-content: center;
      align-items: center;
      z-index: 1000;
      flex-direction: column;
    }
    .full-size-overlay img {
      max-width: 90%;
      max-height: 85%;
      transform-origin: center center;
      transition: transform 0.2s ease;
    }
    .full-size-overlay .close-button {
      position: absolute;
      top: 20px;
      right: 20px;
      background: #fff;
      border: none;
      padding: 5px 20px;
      cursor: pointer;
      font-size: 24px;
      border-radius: 20px;
      line-height: 1;
      box-shadow: 0 2px 8px rgba(0,0,0,0.25);
    }
    .nav-arrow {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: #fff;
      border: none;
      padding: 10px 18px;
      font-size: 24px;
      cursor: pointer;
      border-radius: 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.25);
      user-select: none;
    }
    .nav-arrow.left {
      left: 30px;
    }
    .nav-arrow.right {
      right: 30px;
    }
    .overlay-caption {
      color: #fff;
      font-size: 14px;
      margin-top: 5px;
    }
  </style>
</head>
<body>
  <header>
    <h1>Richard's Travel Photography</h1>
  </header>
  <nav>
    <a href="#gallery">Gallery</a>
    <a href="#about">About Me</a>
    <a href="#contact">Contact</a>
  </nav>
  <section id="gallery">
    <h2>Travel Photography Gallery</h2>
    <div class="galleries">
      <div class="gallery-container" data-category="street">
        <h3 class="gallery-title">Street</h3>
        <div class="gallery" id="street-gallery"></div>
        <div class="section-button-wrapper">
          <button class="show-more-button" data-category="street" onclick="toggleSection('street')">Show More</button>
        </div>
      </div>
      <div class="gallery-container" data-category="portrait">
        <h3 class="gallery-title">Portrait</h3>
        <div class="gallery" id="portrait-gallery"></div>
        <div class="section-button-wrapper">
          <button class="show-more-button" data-category="portrait" onclick="toggleSection('portrait')">Show More</button>
        </div>
      </div>
      <div class="gallery-container" data-category="nature">
        <h3 class="gallery-title">Nature</h3>
        <div class="gallery" id="nature-gallery"></div>
        <div class="section-button-wrapper">
          <button class="show-more-button" data-category="nature" onclick="toggleSection('nature')">Show More</button>
        </div>
      </div>
    </div>
  </section>
  <section id="about">
    <h2>About Me</h2>
    <p>Hello! I'm Richard, a passionate travel photographer who loves capturing the beauty of the world. My journeys have taken me to breathtaking places, and through my lens, I strive to share the awe-inspiring moments I experience. Join me on my adventures as I explore the wonders of our planet, one photo at a time.</p>
  </section>
  <section id="contact">
    <h2>Contact</h2>
    <p>If you would like to get in touch with me, please email me at <a href="mailto:richard20020122@gmail.com">richard20020122@gmail.com</a>.</p>
  </section>
  <footer>
    <p>&copy; 2024 Richard's Travel Photography. All rights reserved.</p>
  </footer>

  <div class="full-size-overlay" id="full-size-overlay" aria-label="Full size image viewer">
    <button class="close-button" onclick="closeFullSize()" aria-label="Close overlay">Ã—</button>
    <button class="nav-arrow left" onclick="showAdjacent(-1)" aria-label="Previous image">&#8592;</button>
    <img id="full-size-image" src="" alt="Full Size">
    <button class="nav-arrow right" onclick="showAdjacent(1)" aria-label="Next image">&#8594;</button>
    <div class="overlay-caption" id="overlay-caption"></div>
  </div>

  <script>
    const categories = {
      street: [
        'IMG_0397.jpg', 'IMG_0418.jpg','IMG_0465.jpg',  'IMG_1945.jpg',
        'IMG_2009.jpg','IMG_2017.jpg',
        'IMG_2991.jpg','IMG_3135.jpg','IMG_8385.jpg','IMG_3299.jpg','IMG_3304.jpg','IMG_0745.jpg',
      ],
      nature: [
        'IMG_8670.jpg', 'IMG_8845.jpg',
        'IMG_1565.jpg', 'IMG_0466.jpg', 'IMG_1790.jpg','IMG_1545.jpg',   'IMG_2016.jpg',
        'IMG_2264.jpg',
        'IMG_1786.jpg', 'IMG_1807.jpg', 'IMG_1808.jpg',
        'IMG_2344.jpg',
        'IMG_3473.jpg',
        'IMG_3832.jpg',
        'IMG_4962.jpg',
        
        'IMG_6001.jpg',
        'IMG_7189.jpg', 'IMG_7225.jpg','IMG_7311.jpg', 'IMG_7346.jpg',
        'IMG_2604.jpg','IMG_2618.jpg','IMG_3331.jpg','IMG_3356.jpg',
      ],
      portrait: [
        'IMG_8413.jpg', 'IMG_7815.jpg', 'IMG_7827.jpg', 'IMG_7561.jpg', 'IMG_7511.jpg',
        'IMG_8645.jpg', 'IMG_8866.jpg','IMG_3363.jpg',
        'IMG_0743.jpg', 'IMG_0768.jpg', 'IMG_1850.jpg', 'IMG_1907.jpg',
        'IMG_3146.jpg', 
        'IMG_4767.jpg',
        'IMG_6063.jpg',
        'IMG_6205.jpg',
        'IMG_2407.jpg',
        'IMG_2473.jpg',
        'IMG_6274.jpg',
        'IMG_6335.jpg',
        'IMG_6348.jpg',
        'IMG_6393.jpg',
        'IMG_6413.jpg',
        'IMG_7085.jpg',
        'IMG_4148.jpg',
        'IMG_4335.jpg',
        'IMG_1856.jpg',
      ]
    };

    const additionalImagesByCategory = {
      street: [
        'IMG_0726.jpg','IMG_5076.jpg','IMG_1810.jpg','IMG_3737.jpg',
        'IMG_2168.jpg','IMG_2084.jpg','IMG_5259.jpg',
        'IMG_1177.jpg','IMG_3400.jpg','IMG_2012.jpg','IMG_2016_2.jpg','IMG_2641.jpg',
      ],
      nature: [
        'IMG_5844.jpg','IMG_0209.jpg','IMG_0280.jpg',
        'IMG_0755.jpg',
        'IMG_1895.jpg','IMG_1919.jpg','IMG_1993.jpg','IMG_2021.jpg',
        'IMG_2561.jpg',
        'IMG_2583.jpg',
        'IMG_4897.jpg'
      ],
      portrait: [
        'IMG_2848.jpg',
        'IMG_6053.jpg',
        'IMG_6091.jpg',
        'IMG_5457.jpg',
        'IMG_2498.jpg',
        'IMG_3185.jpg',
        'IMG_6442.jpg',
        'IMG_6825.jpg',
        'IMG_9266.jpg','IMG_7956.jpg','IMG_7975.jpg','IMG_7536.jpg','IMG_7737.jpg', 'IMG_7809.jpg', 'IMG_7820.jpg',
        'IMG_7794.jpg','IMG_0831.jpg','IMG_4732.jpg','IMG_4734.jpg', 'IMG_2943.jpg', 'IMG_4353.jpg','IMG_4797.jpg',
        'IMG_2599.jpg','IMG_3479.jpg','IMG_3573.jpg','IMG_4327.jpg',
      ]
    };

    // track expanded state
    const expanded = {
      street: false,
      portrait: false,
      nature: false
    };

    // current displayed images used for navigation
    const displayedImages = {
      street: [],
      portrait: [],
      nature: []
    };

    // For full-size overlay navigation
    let currentCategory = null;
    let currentIndex = null;
    let currentScale = 1;

    const smallPhotoPath = 'photos-1_5_resolution/';
    const highResReplacement = { from: 'photos-1_5_resolution/', to: 'photos-reduce/' };

    function createImageElement(category, image, index) {
      const img = document.createElement('img');
      img.src = smallPhotoPath + image;
      img.alt = `${category} Photo`;
      img.dataset.category = category;
      img.dataset.index = index;
      img.onload = () => {
        const aspectRatio = img.naturalWidth / img.naturalHeight;
        if (aspectRatio > 1.5) {
          img.classList.add('landscape');
        } else if (aspectRatio < 0.75) {
          img.classList.add('portrait');
        } else {
          img.classList.add('rectangle');
        }
      };
      img.onclick = () => showFullSize(smallPhotoPath + image, category, index);
      return img;
    }

    function loadCategory(category, containerId) {
      const galleryContainer = document.getElementById(containerId);
      if (!galleryContainer) {
        console.error(`Gallery container for category "${category}" not found.`);
        return;
      }
      galleryContainer.innerHTML = ''; // reset
      displayedImages[category] = [...categories[category]]; // initial
      displayedImages[category].forEach((image, idx) => {
        const img = createImageElement(category, image, idx);
        galleryContainer.appendChild(img);
      });
    }

    function toggleSection(category) {
      const galleryContainer = document.getElementById(`${category}-gallery`);
      const button = document.querySelector(`.show-more-button[data-category="${category}"]`);
      if (!galleryContainer || !button) return;

      if (!expanded[category]) {
        // expand: append additional images
        const base = displayedImages[category].slice(); // original
        const additionals = additionalImagesByCategory[category] || [];
        displayedImages[category] = base.concat(additionals);
        galleryContainer.innerHTML = '';
        displayedImages[category].forEach((image, idx) => {
          const img = createImageElement(category, image, idx);
          galleryContainer.appendChild(img);
        });
        button.textContent = 'Show Less';
        expanded[category] = true;
      } else {
        // collapse back to original config 1
        loadCategory(category, `${category}-gallery`);
        button.textContent = 'Show More';
        expanded[category] = false;
      }
    }


    function applyTransform() {
      const img = document.getElementById('full-size-image');
      img.style.transform = `translate(${currentTranslateX}px, ${currentTranslateY}px) scale(${currentScale})`;
    }

    function wheelHandler(e) {
      e.preventDefault();
      const img = document.getElementById('full-size-image');
      if (!img) return;
      const prevScale = currentScale;
      if (e.deltaY < 0) {
        currentScale *= 1.1;
      } else {
        currentScale /= 1.1;
      }
      currentScale = Math.min(Math.max(currentScale, 0.5), 5);
      // Optional: adjust translate to zoom toward cursor
      const rect = img.getBoundingClientRect();
      const offsetX = e.clientX - rect.left;
      const offsetY = e.clientY - rect.top;
      const dx = (offsetX - currentTranslateX) / prevScale;
      const dy = (offsetY - currentTranslateY) / prevScale;
      // calculate new translate to keep focus
      currentTranslateX -= (currentScale - prevScale) * dx;
      currentTranslateY -= (currentScale - prevScale) * dy;
      applyTransform();
    }

    function showFullSize(imageSrc, category, index) {
      currentCategory = category;
      currentIndex = index;
      currentScale = 1;
      currentTranslateX = 0;
      currentTranslateY = 0;
      lastTranslateX = 0;
      lastTranslateY = 0;
      isPanning = false;
      const overlay = document.getElementById('full-size-overlay');
      const fullSizeImage = document.getElementById('full-size-image');
      const caption = document.getElementById('overlay-caption');
      const highResImageSrc = imageSrc.replace(highResReplacement.from, highResReplacement.to);
      fullSizeImage.src = highResImageSrc;
      fullSizeImage.style.transform = 'scale(1)';
      overlay.style.display = 'flex';
      updateCaption();
      document.addEventListener('keydown', keyHandler);
      overlay.addEventListener('wheel', wheelHandler, { passive: false });

      // pointer-based panning
      fullSizeImage.style.cursor = 'grab';
      fullSizeImage.addEventListener('pointerdown', pointerDownHandler);
      fullSizeImage.addEventListener('pointermove', pointerMoveHandler);
      fullSizeImage.addEventListener('pointerup', pointerUpHandler);
      fullSizeImage.addEventListener('pointerleave', pointerUpHandler);
      fullSizeImage.addEventListener('pointercancel', pointerUpHandler);
    }

    function closeFullSize() {
      const overlay = document.getElementById('full-size-overlay');
      overlay.style.display = 'none';
      document.removeEventListener('keydown', keyHandler);
      overlay.removeEventListener('wheel', wheelHandler);
      const fullSizeImage = document.getElementById('full-size-image');
      fullSizeImage.removeEventListener('pointerdown', pointerDownHandler);
      fullSizeImage.removeEventListener('pointermove', pointerMoveHandler);
      fullSizeImage.removeEventListener('pointerup', pointerUpHandler);
      fullSizeImage.removeEventListener('pointerleave', pointerUpHandler);
      fullSizeImage.removeEventListener('pointercancel', pointerUpHandler);
      fullSizeImage.style.cursor = '';
      currentCategory = null;
      currentIndex = null;
      currentScale = 1;
      currentTranslateX = 0;
      currentTranslateY = 0;
      lastTranslateX = 0;
      lastTranslateY = 0;
      isPanning = false;
    }

    function showAdjacent(delta) {
      if (currentCategory === null || currentIndex === null) return;
      const arr = displayedImages[currentCategory];
      if (!arr || arr.length === 0) return;
      let newIndex = currentIndex + delta;
      if (newIndex < 0) newIndex = arr.length - 1;
      if (newIndex >= arr.length) newIndex = 0;
      currentIndex = newIndex;
      const newImage = arr[newIndex];
      const fullSizeImage = document.getElementById('full-size-image');
      fullSizeImage.src = smallPhotoPath + newImage.replace(highResReplacement.from, highResReplacement.to);
      currentScale = 1;
      currentTranslateX = 0;
      currentTranslateY = 0;
      lastTranslateX = 0;
      lastTranslateY = 0;
      fullSizeImage.style.cursor = 'grab';
      applyTransform();
      updateCaption();
    }

    // panning state
    let currentTranslateX = 0;
    let currentTranslateY = 0;
    let lastTranslateX = 0;
    let lastTranslateY = 0;
    let isPanning = false;
    let startX = 0;
    let startY = 0;

    function pointerDownHandler(e) {
      if (e.pointerType === 'mouse' && e.button !== 0) return; // only left click
      const img = document.getElementById('full-size-image');
      isPanning = true;
      startX = e.clientX;
      startY = e.clientY;
      lastTranslateX = currentTranslateX;
      lastTranslateY = currentTranslateY;
      img.setPointerCapture(e.pointerId);
      img.style.cursor = 'grabbing';
    }

    function pointerMoveHandler(e) {
      if (!isPanning) return;
      const dx = e.clientX - startX;
      const dy = e.clientY - startY;
      currentTranslateX = lastTranslateX + dx;
      currentTranslateY = lastTranslateY + dy;
      applyTransform();
    }

    function pointerUpHandler(e) {
      if (!isPanning) return;
      isPanning = false;
      const img = document.getElementById('full-size-image');
      img.style.cursor = 'grab';
      lastTranslateX = currentTranslateX;
      lastTranslateY = currentTranslateY;
      if (e.pointerId) {
        try { img.releasePointerCapture(e.pointerId); } catch {}
      }
    }

    function keyHandler(e) {
      if (e.key === 'ArrowRight') {
        showAdjacent(1);
      } else if (e.key === 'ArrowLeft') {
        showAdjacent(-1);
      } else if (e.key === 'Escape') {
        closeFullSize();
      }
    }

    function updateCaption() {
      const caption = document.getElementById('overlay-caption');
      if (currentCategory !== null && currentIndex !== null) {
        caption.textContent = `${currentCategory.toUpperCase()} ${currentIndex + 1} of ${displayedImages[currentCategory].length}`;
      } else {
        caption.textContent = '';
      }
    }

    document.addEventListener('DOMContentLoaded', () => {
      Object.keys(categories).forEach(category => {
        loadCategory(category, `${category}-gallery`);
      });
    });
  </script>
</body>
</html>
